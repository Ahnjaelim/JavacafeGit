
<div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">관리자 정보 검색하기</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form action="/admin/list" method="get" id="f1">
        	<div class="input-group mb-3">
        		<input type ="hidden" name="type" value="i"/>
				<span class="inven-input-group">ID</span>
				<input type="text" name="keyword" class="form-control" placeholder="검색할 ID를 입력하세요">
				<button class="btn btn-secondary searchBtn inven-search-btn" id="search">
						<ion-icon name="search-outline" class="inven-search-icon"></ion-icon>
					</button>
			</div>
        	<div class="admin_searchlist">
        		<table>
	        		<thead>
	        			<tr th:each="dto:${dto.dtoList}">
	        				<th>id</th><th>[[${dto.id}]]</th>
	        			</tr>
	        		</thead>
	        	</table>
        	</div>
        	
        	<!-- 페이징처리 start -->
			<div style="display: none;">
				<div class="inven-paging">
			    	<ul class="inven-pagination" >
			
			        	<th:block  class="" th:if="${dto.prev}">
			            	<a class="btn btn-outline-primary " th:data-num="${dto.start -1}"><</a>
			            </th:block>
			
			            <th:block th:each="i: ${#numbers.sequence(dto.start, dto.end)}">
			            	<a th:class="${dto.page == i}?'btn btn-primary active ':'btn btn-outline-primary '"  th:data-num="${i}">[[${i}]]</a>
			            </th:block>
			
			            <th:block class="" th:if="${dto.next}">
			            	<a class="btn btn-outline-primary "  th:data-num="${dto.end + 1}">></a>
			            </th:block>
					</ul>
				</div><!-- 페이징처리end -->
		 	</div>
	  </div>
		      <div class="modal-footer">
		      	<button class="btn btn-primary" th:onclick="'location.href=\''+@{/admin/list}+'\''">관리자 전체보기</button>
		        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
		      </div>
        </form>
   </div>
</div>

<!-- ====================================================== -->
<script layout:fragment="script" th:inline="javascript">
	document.querySelector(".inven-pagination").addEventListener("click",function (e) {
		e.preventDefault()
		e.stopPropagation()
		const target = e.target
		if(target.tagName !== 'A'){
		return
		}
		
		const num = target.getAttribute("data-num")
		const formObj = document.querySelector("form")
		formObj.innerHTML += `<input type='hidden' name='page' value='${num}'>`
		formObj.submit();
	},false)
	
 

	
	//검색타입 선택x 검색못하게만들기
	var type = document.querySelector("#searchtype");
	
	document.querySelector("#search").addEventListener("click",function (e){
		
		if(type.value ==""){
		alert('검색타입을 지정해주세요')
		document.querySelector("#searchtype").focus();
		event.preventDefault();
		} 
		
		formObj.submit();
		
	})

</script>	

